(function(b){function A(a,g){function h(){var a=document.body,b=document.documentElement;return Math.max(a.scrollHeight,a.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)}function n(a){i=b("li.dw-v",a).eq(0).index();f=b("li.dw-v",a).eq(-1).index();F=b("ul",j).index(a);s=e.height;c=d}function l(a){var b=e.headerText;return b?"function"==typeof b?b.call(o,a):b.replace(/{value}/i,a):""}function z(){d.temp=B&&null!==d.val&&d.val!=a.val()||null===d.values?e.parseValue(a.val()?a.val():"",d):d.values.slice(0);
d.setValue(!0)}function J(a,g,f,c,h){e.validate.call(o,j,f,a);b(".dww ul",j).each(function(e){var p=b(this),k=b('li[data-val="'+d.temp[e]+'"]',p),c=k.index();if(!k.hasClass("dw-v")){for(var j=k,n=0,u=0;j.prev().length&&!j.hasClass("dw-v");)j=j.prev(),n++;for(;k.next().length&&!k.hasClass("dw-v");)k=k.next(),u++;(u<n&&u&&1==!h||!n||!j.hasClass("dw-v")||1==h)&&k.hasClass("dw-v")?c+=u:(k=j,c-=n);d.temp[e]=k.attr("data-val")}k=c;c=e==f||void 0===f;k!=p.data("pos")&&d.scroll(b(this),k,c?a:0.2,g,e)});d.change(c)}
function N(){var a=0,e=0,d=b(window).width(),g=b(window).height(),f=b(window).scrollTop(),c=b(".dwo",j),p=b(".dw",j),k,n;b(".dwc",j).each(function(){k=b(this).outerWidth(!0);a+=k;e=k>e?k:e});k=a>d?e:a;p.width(k+1);k=p.outerWidth();n=p.outerHeight();p.css({left:(d-k)/2,top:f+(g-n)/2});c.height(0).height(h())}function A(a){var b=+a.data("pos")+1;t(a,b>f?i:b,1)}function M(a){var b=+a.data("pos")-1;t(a,b<i?f:b,2)}var d=this,o=a,a=b(o),K,O,e=b.extend({},P),Q,j,G={},B=a.is("input"),C=!1;d.enable=function(){e.disabled=
!1;B&&a.prop("disabled",!1)};d.disable=function(){e.disabled=!0;B&&a.prop("disabled",!0)};d.scroll=function(a,b,d,g,f){var c=(Q-b)*e.height;a.attr("style",(d?R+"-transition:all "+d.toFixed(1)+"s ease-out;":"")+(T?R+"-transform:translate3d(0,"+c+"px,0);":"top:"+c+"px;"));clearInterval(G[f]);if(d&&void 0!==g){var p=0;G[f]=setInterval(function(){p+=0.1;a.data("pos",Math.round((b-g)*Math.sin(p/d*(Math.PI/2))+g));p>=d&&(clearInterval(G[f]),a.data("pos",b).closest(".dwwl").removeClass("dwa"))},100)}else a.data("pos",
b)};d.setValue=function(b,g,f){d.values=d.temp.slice(0);C&&b&&J(f);g&&(b=e.formatResult(d.temp),d.val=b,B&&a.val(b).trigger("change"))};d.validate=function(a,b,e,d){J(a,b,e,!0,d)};d.change=function(a){var g=e.formatResult(d.temp);"inline"==e.display?d.setValue(!1,a):b(".dwv",j).html(l(g));a&&e.onChange.call(o,g,d)};d.hide=function(){if(!1===e.onClose.call(o,d.val,d))return!1;b(".dwtd").prop("disabled",!1).removeClass("dwtd");a.blur();j&&j.remove();C=!1;b(window).unbind(".dw")};d.show=function(){if(e.disabled||
C)return!1;var g=e.height,f;z();for(var c='<div class="'+e.theme+'">'+("inline"==e.display?'<div class="dw dwbg dwi"><div class="dwwr">':'<div class="dwo"></div><div class="dw dwbg"><div class="dwwr">'+(e.headerText?'<div class="dwv"></div>':"")),h=0;h<e.wheels.length;h++){c+='<div class="dwc'+("scroller"!=e.mode?" dwpm":" dwsc")+(e.showLabel?"":" dwhl")+'"><div class="dwwc dwrc"><table cellpadding="0" cellspacing="0"><tr>';f=0;for(var u in e.wheels[h]){var c=c+('<td><div class="dwwl dwrc dwwl'+f+
'">'+("scroller"!=e.mode?'<div class="dwwb dwwbp" style="height:'+g+"px;line-height:"+g+'px;"><span>+</span></div><div class="dwwb dwwbm" style="height:'+g+"px;line-height:"+g+'px;"><span>&ndash;</span></div>':"")+'<div class="dwl">'+u+'</div><div class="dww dwrc" style="height:'+e.rows*g+"px;min-width:"+e.width+'px;"><ul>'),i;for(i in e.wheels[h][u])c+='<li class="dw-v" data-val="'+i+'" style="height:'+g+"px;line-height:"+g+'px;">'+e.wheels[h][u][i]+"</li>";c+='</ul><div class="dwwo"></div></div><div class="dwwol"></div></div></td>';
f++}c+="</tr></table></div></div>"}c+=("inline"!=e.display?'<div class="dwbc"><span class="dwbw dwb-s"><a href="#" class="dwb">'+e.setText+'</a></span><span class="dwbw dwb-c"><a href="#" class="dwb">'+e.cancelText+"</a></span></div>":'<div class="dwcc"></div>')+"</div></div></div>";j=b(c);J();"inline"!=e.display?j.appendTo("body"):a.is("div")?a.html(j):j.insertAfter(a);C=!0;K.init(j,d);"inline"!=e.display&&(b(".dwb-s a",j).click(function(){d.setValue(!1,!0);d.hide();e.onSelect.call(o,d.val,d);return!1}),
b(".dwb-c a",j).click(function(){d.hide();e.onCancel.call(o,d.val,d);return!1}),b("input,select").each(function(){b(this).prop("disabled")||b(this).addClass("dwtd")}),b("input,select").prop("disabled",!0),N(),b(window).bind("resize.dw",N));j.delegate(".dwwl","DOMMouseScroll mousewheel",function(a){if(!e.readonly){a.preventDefault();var a=a.originalEvent,a=a.wheelDelta?a.wheelDelta/120:a.detail?-a.detail/3:0,g=b("ul",this),d=+g.data("pos"),d=Math.round(d-a);n(g);t(g,d,a<0?1:2)}}).delegate(".dwb, .dwwb",
L,function(){b(this).addClass("dwb-a")}).delegate(".dwwb",L,function(a){if(!e.readonly&&!b(this).closest(".dwwl").hasClass("dwa")){a.preventDefault();a.stopPropagation();var g=b(this).closest(".dwwl").find("ul"),d=b(this).hasClass("dwwbp")?A:M;H=true;n(g);clearInterval(y);y=setInterval(function(){d(g)},e.delay);d(g)}}).delegate(".dwwl",L,function(a){if(!D&&!e.readonly&&!H&&e.mode!="clickpick"){a.preventDefault();D=true;v=b("ul",this);v.closest(".dwwl").addClass("dwa");E=+v.data("pos");n(v);clearInterval(G[F]);
w=q(a);S=new Date;x=w;d.scroll(v,E)}});e.onShow.call(o,j,d)};d.init=function(c){K=b.extend({defaults:{},init:r},b.scroller.themes[c.theme?c.theme:e.theme]);O=b.scroller.i18n[c.lang?c.lang:e.lang];b.extend(e,K.defaults,O,g,c);d.settings=e;Q=Math.floor(e.rows/2);var f=b.scroller.presets[e.preset];a.unbind(".dw");f&&(f=f.call(o,d),b.extend(e,f,g,c),b.extend(I,f.methods));void 0!==a.data("dwro")&&(o.readOnly=m(a.data("dwro")));C&&d.hide();"inline"==e.display?d.show():(z(),B&&e.showOnFocus&&(a.data("dwro",
o.readOnly),o.readOnly=!0,a.bind("focus.dw",d.show)))};d.values=null;d.val=null;d.temp=null;d.init(g)}function l(a){for(var b in a)if(void 0!==M[a[b]])return!0;return!1}function q(a){return a.changedTouches||a.originalEvent&&a.originalEvent.changedTouches?a.originalEvent?a.originalEvent.changedTouches[0].pageY:a.changedTouches[0].pageY:a.pageY}function m(a){return!0===a||"true"==a}function t(a,g,h,n,l){g=g>f?f:g;g=g<i?i:g;a=b("li",a).eq(g);c.temp[F]=a.attr("data-val");c.validate(n?g==l?0.1:Math.abs(0.1*
(g-l)):0,l,F,h)}var h={},y,r=function(){},s,i,f,c,z=(new Date).getTime(),D,H,v,F,w,x,S,E,M=document.createElement("modernizr").style,T=l(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"])&&"webkitPerspective"in document.documentElement.style,R=function(){var a=["Webkit","Moz","O","ms"],b;for(b in a)if(l([a[b]+"Transform"]))return"-"+a[b].toLowerCase();return""}(),L="touchstart mousedown",P={width:70,height:40,rows:3,delay:300,disabled:!1,readonly:!1,showOnFocus:!0,
showLabel:!0,wheels:[],theme:"",headerText:"{value}",display:"modal",mode:"scroller",preset:"",lang:"en-US",setText:"Set",cancelText:"Cancel",onShow:r,onClose:r,onSelect:r,onCancel:r,onChange:r,formatResult:function(a){for(var b="",c=0;c<a.length;c++)b+=(0<c?" ":"")+a[c];return b},parseValue:function(a,b){for(var c=b.settings.wheels,a=a.split(" "),f=[],h=0,i=0;i<c.length;i++)for(var l in c[i]){if(void 0!==c[i][l][a[h]])f.push(a[h]);else for(var m in c[i][l]){f.push(m);break}h++}return f},validate:r},
I={init:function(a){void 0===a&&(a={});return this.each(function(){this.id||(z+=1,this.id="scoller"+z);h[this.id]=new A(this,a)})},enable:function(){return this.each(function(){var a=h[this.id];a&&a.enable()})},disable:function(){return this.each(function(){var a=h[this.id];a&&a.disable()})},isDisabled:function(){var a=h[this[0].id];if(a)return a.settings.disabled},option:function(a,b){return this.each(function(){var c=h[this.id];if(c){var f={};"object"===typeof a?f=a:f[a]=b;c.init(f)}})},setValue:function(a,
b,c){return this.each(function(){var f=h[this.id];f&&(f.temp=a,f.setValue(!0,b,c))})},getInst:function(){return h[this[0].id]},getValue:function(){var a=h[this[0].id];if(a)return a.values},show:function(){var a=h[this[0].id];if(a)return a.show()},hide:function(){return this.each(function(){var a=h[this.id];a&&a.hide()})},destroy:function(){return this.each(function(){var a=h[this.id];a&&(a.hide(),b(this).unbind(".dw"),delete h[this.id],b(this).is("input")&&(this.readOnly=m(b(this).data("dwro"))))})}};
b(document).bind("touchmove mousemove",function(a){D&&(a.preventDefault(),x=q(a),a=E+(w-x)/s,a=a>f+1?f+1:a,a=a<i-1?i-1:a,c.scroll(v,a))});b(document).bind("touchend mouseup",function(a){if(D){a.preventDefault();var c=new Date-S,a=E+(w-x)/s,a=a>f+1?f+1:a,a=a<i-1?i-1:a;300>c?(c=(x-w)/c,c=c*c/0.0012,0>x-w&&(c=-c)):c=x-w;t(v,Math.round(E-c/s),0,!0,Math.round(a));D=!1;v=null}H&&(clearInterval(y),H=!1);b(".dwb-a").removeClass("dwb-a")});b.fn.scroller=function(a){if(I[a])return I[a].apply(this,Array.prototype.slice.call(arguments,
1));if("object"===typeof a||!a)return I.init.apply(this,arguments);b.error("Unknown method")};b.scroller={setDefaults:function(a){b.extend(P,a)},presets:{},themes:{},i18n:{}}})(jQuery);(function(b){var A={inputClass:"",invalid:[]};b.scroller.presets.select=function(l){var q=b.extend({},A,l.settings),m=b(this),t=this.id+"_dummy";b('label[for="'+this.id+'"]').attr("for",t);var h=b('label[for="'+t+'"]'),h=void 0!==q.label?q.label:h.length?h.text():m.attr("name"),y=[],r=[{}];r[0][h]={};var s=r[0][h];b("option",m).each(function(){var f=b(this).attr("value");s["_"+f]=b(this).text();b(this).prop("disabled")&&y.push(f)});q.invalid.length||(q.invalid=y);b("#"+t).remove();var i=b('<input type="text" id="'+
t+'" value="'+s["_"+m.val()]+'" class="'+q.inputClass+'" readonly />').insertBefore(m);q.showOnFocus&&i.focus(function(){l.show()});m.bind("change",function(){"_"+b(this).val()!==l.values[0]&&l.setSelectVal([b(this).val()],true)}).hide().closest(".ui-field-contain").trigger("create");l.setSelectVal=function(b,c,h){l.temp=["_"+b[0]];l.setValue(true,c,h);if(c){i.val(s["_"+b[0]]);c=b[0]!==m.val();m.val(b[0]);c&&m.trigger("change")}};l.getSelectVal=function(b){return(b?l.temp:l.values)[0].replace(/_/,
"")};return{width:200,wheels:r,headerText:!1,formatResult:function(b){return s[b[0]]},parseValue:function(){return["_"+m.val()]},validate:function(f){b.each(q.invalid,function(c,h){b('li[data-val="_'+h+'"]',f).removeClass("dw-v")})},onSelect:function(b,c){i.val(b);m.val(c.values[0].replace(/_/,"")).trigger("change")},onChange:function(b,c){if(q.display=="inline"){i.val(b);m.val(c.temp[0].replace(/_/,"")).trigger("change")}},onClose:function(){i.blur()},methods:{setValue:function(f,c,h){return this.each(function(){var i=
b(this).scroller("getInst");if(i)if(i.setSelectVal)i.setSelectVal(f,c,h);else{i.temp=f;i.setValue(true,c,h)}})},getValue:function(f){var c=b(this).scroller("getInst");if(c)return c.getSelectVal?c.getSelectVal(f):c.values}}}}})(jQuery);
